<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Podrex: Podcast Recommendations</title>

    <!-- Bootstrap core CSS -->
    <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../static/css/4-col-portfolio.css" rel="stylesheet">
    <link href="../static/vendor/slider/slider.css" rel="stylesheet">
  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="http://www.podrex.io">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <!--
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Podcast Directory</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact Us</a>
            </li>
            -->
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">

      <!-- Page Heading -->
      <header class="jumbotron my-4">
       <div class="container">
        <div class="row">
            <div class="col-sm-10">
                <h3 class="display-6">Here's what I found</h3>
                  <p class="lead">Check out some of the podcasts below. Use the links underneath the description to find the podcast on iTunes or Stitcher. Feel free to bookmark this page to see your recommendations later.</p>
            </div>
            <div class="col-sm-2">
                <img style="width:100%" src="http://podcasts-dragon-nba-who.s3-website-us-west-2.amazonaws.com/static/images/podrex.png" />
            </div>
        </div>
        <div class="row" style="margin-top:2rem;">
          <div class="col-md-8">
            <p class="lead">Recommendations not what you expected? Search for popular podcasts about:
          </div>
          <div class="col-md-4">
              <input id="text-search" style="width:80%;" placeholder="ex. data science machine learning"></input>
              <button class="btn btn-primary" type="button" onclick="submit();" style="display:inline; margin:auto; width:15%; height:90%;">
                  <img src="https://s3-us-west-2.amazonaws.com/podcasts-dragon-nba-who/static/images/search.png" style="width:100%;"/>
              </button>
          </div>
        </div>
    </div>
     </header>

      <div class="row" id="recommendations">
          {% for card in cards %}
        <div class="col-lg-3 col-md-4 col-sm-6 portfolio-item">
          <div class="card h-100">
            <a href="#"><img class="card-img-top" src="http://podcasts-dragon-nba-who.s3-website-us-west-2.amazonaws.com/static/artwork/{{ card.0 }}.jpg" alt=""></a>
            <div class="card-body">
              <h4 class="card-title text-center">
                <a>{{ card.1 }}</a>
              </h4>
              <p class="card-text">{{ card.3 }}</p>
              <a href="{{ card.4 }}"><img style="width:100%; padding-bottom:2.5%;" src="https://s3-us-west-2.amazonaws.com/podcasts-dragon-nba-who/static/images/itunes.png"/></a>
              <a href="{{ card.5 }}"><img style="width:100%; padding-bottom:2.5%;" src="https://s3-us-west-2.amazonaws.com/podcasts-dragon-nba-who/static/images/stitcher.png"/></a>
              <a href="{{ card.6 }}" style="display: block; width: 100%; text-align:center;padding:10%;background-color:#006c7d;border-radius:5px;color:#ffffff;font-size:1.1rem;">Podcast Website</a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <!-- /.row -->
    </div>
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Brett Smith 2018</p>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="../static/vendor/jquery/jquery.min.js"></script>
    <script src="../static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
    submit = function(){
        let search = $("#text-search").val()
        $.post({
            url: "../text-search/",
            contentType: "application/json",
            data: JSON.stringify({"search":search}),
            success: function(result){
                $("#recommendations").before(
                    $("<div/>")
                    .addClass("row")
                    .attr("id","search-results")
                )
                $("#search-results").append(
                    $("<div/>")
                    .addClass("col-md-12")
                    .attr("id", "search-results-header")
                       .append(
                           $("<h4/>")
                            .addClass("text-center")
                            .text("Search Results:")
                            )
                   );

                for (let card of result) {
                    let id = card["sid"]
                    $("#search-results").append(
                        $("<div/>")
                          .addClass("col-lg-3 col-md-4 col-sm-6 portfolio-item")
                          .append(
                              $("<div/>")
                              .addClass("card h-100")
                              .append(
                                  $("<a/>")
                                  .attr("href", "#")
                                     .append(
                                         $("<img/>")
                                          .attr("src", "http://podcasts-dragon-nba-who.s3-website-us-west-2.amazonaws.com/static/artwork/"+card["art_id"]+".jpg")
                                          .addClass("card-img-top")
                                          )
                               )
                              .append(
                                 $("<div/>")
                                   .addClass("card-body")
                                   .append(
                                     $("<h4/>")
                                       .addClass("card-title text-center")
                                       .append(
                                           $("<a/>")
                                           .text(card["title"])
                                       )
                                   )
                                   .append(
                                     $("<p/>")
                                     .addClass("card-text")
                                     .attr("style","margin-top:1rem;")
                                     .text(card["description"])
                                   )
                              )
                              )
                          )
               }
            }
        });
    }
    </script>
  </body>

</html>
